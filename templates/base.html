<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>{% block title %}StockNavi{% endblock %}</title>

  <style>
    .btn {
      display: inline-block;
      padding: 8px 12px;
      border: 1px solid #333;
      border-radius: 8px;
      text-decoration: none;
      color: #000;
    }
    .btn-danger { border-color: #b00; }
    .wrap {
      max-width: 900px;
      margin: 20px auto;
      padding: 0 12px;
    }
    .nav a { margin-right: 10px; }
    .nav { position: relative; z-index: 10; }

    /* カード全体の文字を赤/青にする（既存の色指定を上書きする） */
    .item-card.text-alert-red,
    .item-card.text-alert-red * {
      color: #dc3545 !important;
      font-weight: 600;
    }

    .item-card.text-alert-blue,
    .item-card.text-alert-blue * {
      color: #0d6efd !important;
      font-weight: 600;
    }

    /* ただし、カテゴリタグの背景色はそのままにしたいので文字色だけ白に戻す（任意） */
    .item-card.text-alert-red .cat-tag,
    .item-card.text-alert-blue .cat-tag {
      color: #fff !important;
    }
  </style>
</head>

<body>
  <div class="wrap">

    {% if user.is_authenticated %}
      <nav class="app-nav">
        <a href="{% url 'inventory:inventory_list' %}"
          class="{% if request.resolver_match.url_name == 'inventory_list' %}is-active{% endif %}">
          在庫
        </a>

        <a href="{% url 'inventory:balance' %}"
          class="{% if request.resolver_match.url_name == 'balance' %}is-active{% endif %}">
          バランス
        </a>

        <a href="{% url 'inventory:memo_list' %}"
          class="{% if request.resolver_match.url_name|default:''|slice:':4' == 'memo' %}is-active{% endif %}">
          メモ
        </a>

        <a href="{% url 'inventory:settings' %}"
          class="{% if request.resolver_match.url_name == 'settings' %}is-active{% endif %}">
          設定一覧
        </a>

        <a href="{% url 'accounts:mypage' %}">
          マイページ
        </a>
      </nav>
      <hr>
    {% endif %}

    {% if messages %}
      <ul>
        {% for message in messages %}
          <li>{{ message }}</li>
        {% endfor %}
      </ul>
    {% endif %}
    
    <!-- ★本文はログイン状態に関係なく必ず描画する -->
    {% block content %}{% endblock %}

  </div>
</body>
</html>